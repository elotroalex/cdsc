<div class="container">
  <!-- Navigation Links -->
  <div class="program-navigation">
    <a href="#program-2022-23" class="btn btn-link">2022-23</a> |
    <a href="#program-2023-24" class="btn btn-link">2023-24</a>
  </div>

  <div class="grantee-list">
    {% assign grouped_grantees = site.data.grantees-upr | group_by: "Program Name" %}
    {% for program in grouped_grantees %}
    {% if program.name == "DH Scholars in Residence 2023-24" %}
    <div id="program-2023-24" class="program-group">
      <h2 class="program-title">{{ program.name }}</h2>
      <div class="row">
        {% for grantee in program.items %}
        <div class="col-12">
          <div class="grantee-item mb-3 mt-3 row">
            <!-- Image Column -->
            <div class="col-2">
              {% assign image_index = forloop.index0 | modulo: 2 %}
              {% if image_index == 0 %}
              <img src="/assets/images/54.png" alt="Placeholder Image 1" class="img-fluid" />
              {% else %}
              <img src="/assets/images/55.png" alt="Placeholder Image 2" class="img-fluid" />
              {% endif %}
            </div>

            <!-- Text Column -->
            <div class="col-9">
              <h4 class="mb-0">{{ grantee["Project Title"] }}</h4>
              <p class="m-0 pt-2 small-text"><strong>DH Scholars:</strong> {{ grantee["DH Scholars"] }}</p>
              <p class="m-0 small-text"><strong>Community Partner:</strong> {{ grantee["Community partner"] }}</p>
              <p class="m-0 small-text"><strong>Mentor:</strong> {{ grantee["Mentor"] }}</p>
              
              <div class="description">
                <p class="mt-3 collapse-content">{{ grantee["Project description (150 words)"] }}</p>
                <div class="view-more-link mt-2" style="display: none;">
                  {% if grantee["External Links"] %}
                  <a href="{{ grantee["External Links"] }}" target="_blank" class="btn btn-outline-primary btn-sm">View more</a>
                  {% endif %}
                </div>
                <a href="#" class="toggle-description mt-2 text-decoration-underline fw-bold">See more</a>
              </div>
              
        
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
    {% endfor %}
  </div>
</div>

<!-- CSS -->
<style>
  .collapse-content {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .description.expanded .collapse-content {
    display: block;
    -webkit-line-clamp: unset;
    -webkit-box-orient: unset;
    overflow: visible;
  }
</style>

<!-- JavaScript -->
<script>
document.querySelectorAll('.toggle-description').forEach(toggle => {
  toggle.addEventListener('click', function (event) {
    event.preventDefault();

    const description = this.closest('.description');
    const collapseContent = description.querySelector('.collapse-content');
    const viewMoreLink = description.querySelector('.view-more-link');

    if (description.classList.contains('expanded')) {
      // Collapse content
      description.classList.remove('expanded');
      this.textContent = 'See more';
      collapseContent.style.display = '-webkit-box'; // Reapply truncation
      if (viewMoreLink) viewMoreLink.style.display = 'none'; // Hide link
    } else {
      // Expand content
      description.classList.add('expanded');
      this.textContent = 'See less';
      collapseContent.style.display = 'block'; // Show full content
      if (viewMoreLink) viewMoreLink.style.display = 'block'; // Show link
    }
  });
});

</script>
